#!/usr/bin/env bash

function _color_pacman() {
    # Based on: http://crunchbang.org/forums/viewtopic.php?pid=144481#p144481
    echo -e "\033[0;33m  ▄███████▄                \033[0;31m  ▄██████▄    \
\033[0;32m  ▄██████▄    \033[0;34m  ▄██████▄    \033[0;35m  ▄██████▄    \
\033[0;36m  ▄██████▄\033[0m"
    echo -e "\033[0;33m▄█████████▀▀               \033[0;31m▄\033[0;37m█▀█\
\033[0;31m██\033[0;37m█▀█\033[0;31m██▄  \033[0;32m▄█\033[0;37m███\033[0;32m██\
\033[0;37m███\033[0;32m█▄  \033[0;34m▄█\033[0;37m███\033[0;34m██\033[0;37m███\
\033[0;34m█▄  \033[0;35m▄█\033[0;37m███\033[0;35m██\033[0;37m███\033[0;35m█▄  \
\033[0;36m▄██\033[0;37m█▀█\033[0;36m██\033[0;37m█▀█\033[0;36m▄\033[0m"
    echo -e "\033[0;33m███████▀      \033[0;37m▄▄  ▄▄  ▄▄   \033[0;31m█\
\033[0;37m▄▄█\033[0;31m██\033[0;37m▄▄█\033[0;31m███  \033[0;32m██\033[0;37m█ █\
\033[0;32m██\033[0;37m█ █\033[0;32m██  \033[0;34m██\033[0;37m█ █\033[0;34m██\
\033[0;37m█ █\033[0;34m██  \033[0;35m██\033[0;37m█ █\033[0;35m██\033[0;37m█ █\
\033[0;35m██  \033[0;36m███\033[0;37m█▄▄\033[0;36m██\033[0;37m█▄▄\033[0;36m█\
\033[0m"
    echo -e "\033[0;33m███████▄      \033[0;37m▀▀  ▀▀  ▀▀   \
\033[0;31m████████████  \033[0;32m████████████  \033[0;34m████████████  \
\033[0;35m████████████  \033[0;36m████████████\033[0m"
    echo -e "\033[0;33m▀█████████▄▄               \033[0;31m██▀██▀▀██▀██  \
\033[0;32m██▀██▀▀██▀██  \033[0;34m██▀██▀▀██▀██  \033[0;35m██▀██▀▀██▀██  \
\033[0;36m██▀██▀▀██▀██\033[0m"
    echo -e "\033[0;33m  ▀███████▀                \033[0;31m▀   ▀  ▀   ▀  \
\033[0;32m▀   ▀  ▀   ▀  \033[0;34m▀   ▀  ▀   ▀  \033[0;35m▀   ▀  ▀   ▀  \
\033[0;36m▀   ▀  ▀   ▀\033[0m"
    echo
    echo -e "\033[1;33m  ▄███████▄                \033[1;31m  ▄██████▄    \
\033[1;32m  ▄██████▄    \033[1;34m  ▄██████▄    \033[1;35m  ▄██████▄    \
\033[1;36m  ▄██████▄\033[0m"
    echo -e "\033[1;33m▄█████████▀▀               \033[1;31m▄\033[1;37m█▀█\
\033[1;31m██\033[1;37m█▀█\033[1;31m██▄  \033[1;32m▄█\033[1;37m█ █\033[1;32m██\
\033[1;37m█ █\033[1;32m█▄  \033[1;34m▄█\033[1;37m█ █\033[1;34m██\033[1;37m█ █\
\033[1;34m█▄  \033[1;35m▄█\033[1;37m█ █\033[1;35m██\033[1;37m█ █\033[1;35m█▄  \
\033[1;36m▄██\033[1;37m█▀█\033[1;36m██\033[1;37m█▀█\033[1;36m▄\033[0m"
    echo -e "\033[1;33m███████▀      \033[1;37m▄▄  ▄▄  ▄▄   \033[1;31m█\
\033[1;37m▄▄█\033[1;31m██\033[1;37m▄▄█\033[1;31m███  \033[1;32m██\033[1;37m███\
\033[1;32m██\033[1;37m███\033[1;32m██  \033[1;34m██\033[1;37m███\033[1;34m██\
\033[1;37m███\033[1;34m██  \033[1;35m██\033[1;37m███\033[1;35m██\033[1;37m███\
\033[1;35m██  \033[1;36m███\033[1;37m█▄▄\033[1;36m██\033[1;37m█▄▄\033[1;36m█\
\033[0m"
    echo -e "\033[1;33m███████▄      \033[1;37m▀▀  ▀▀  ▀▀   \
\033[1;31m████████████  \033[1;32m████████████  \033[1;34m████████████  \
\033[1;35m████████████  \033[1;36m████████████\033[0m"
    echo -e "\033[1;33m▀█████████▄▄               \033[1;31m██▀██▀▀██▀██  \
\033[1;32m██▀██▀▀██▀██  \033[1;34m██▀██▀▀██▀██  \033[1;35m██▀██▀▀██▀██  \
\033[1;36m██▀██▀▀██▀██\033[0m"
    echo -e "\033[1;33m  ▀███████▀                \033[1;31m▀   ▀  ▀   ▀  \
\033[1;32m▀   ▀  ▀   ▀  \033[1;34m▀   ▀  ▀   ▀  \033[1;35m▀   ▀  ▀   ▀  \
\033[1;36m▀   ▀  ▀   ▀\033[0m"
}

function _color_grid() {
    # Source: http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html
    local T='gYw' # The test text
    echo -e "\n                 40m     41m     42m     43m\
     44m     45m     46m     47m"
    for FGs in '    m' '   1m' '  30m' '1;30m' '  31m' '1;31m' '  32m' \
        '1;32m' '  33m' '1;33m' '  34m' '1;34m' '  35m' '1;35m' \
        '  36m' '1;36m' '  37m' '1;37m'; do
        local FG=${FGs// /}
        echo -en " $FGs \033[$FG  $T  "
        for BG in 40m 41m 42m 43m 44m 45m 46m 47m; do
            echo -en "$EINS \033[$FG\033[$BG  $T  \033[0m"
        done
        echo
    done
    echo
}

function _true_color_line() {
    # Source: https://gist.github.com/XVilka/8346728
    awk 'BEGIN{
    s="/\\/\\/\\/\\/\\"; s=s s s s s s s s s s s s s s s s s s s s s s s;
    for (colnum = 0; colnum<256; colnum++) {
        r = 255-(colnum*255/255);
        g = (colnum*510/255);
        b = (colnum*255/255);
        if (g>255) g = 510-g;
            printf "\033[48;2;%d;%d;%dm", r,g,b;
            printf "\033[38;2;%d;%d;%dm", 255-r,255-g,255-b;
            printf "%s\033[0m", substr(s,colnum+1,1);
        }
        printf "\n";
    }'
}

function _colors_list() {
    echo -e "\033[0mNC (No color)"
    echo -e "\033[1;37mWHITE\t\033[0;30mBLACK"
    echo -e "\033[0;34mBLUE\t\033[1;34mLIGHT_BLUE"
    echo -e "\033[0;32mGREEN\t\033[1;32mLIGHT_GREEN"
    echo -e "\033[0;36mCYAN\t\033[1;36mLIGHT_CYAN"
    echo -e "\033[0;31mRED\t\033[1;31mLIGHT_RED"
    echo -e "\033[0;35mPURPLE\t\033[1;35mLIGHT_PURPLE"
    echo -e "\033[0;33mYELLOW\t\033[1;33mLIGHT_YELLOW"
    echo -e "\033[1;30mGRAY\t\033[0;37mLIGHT_GRAY"
}

function _colors_space() {
    # Based on: http://crunchbang.org/forums/viewtopic.php?pid=126921%23p126921#p126921
    echo -e "\033[0;30m  ▀▄   ▄▀     \033[0;31m ▄▄▄████▄▄▄    \
\033[0;32m  ▄██▄     \033[0;33m  ▀▄   ▄▀     \033[0;34m ▄▄▄████▄▄▄    \
\033[0;35m  ▄██▄  \033[0m"
    echo -e "\033[0;30m ▄█▀███▀█▄    \033[0;31m███▀▀██▀▀███   \
\033[0;32m▄█▀██▀█▄   \033[0;33m ▄█▀███▀█▄    \033[0;34m███▀▀██▀▀███   \
\033[0;35m▄█▀██▀█▄\033[0m"
    echo -e "\033[0;30m█▀███████▀█   \033[0;31m▀▀███▀▀███▀▀   \
\033[0;32m▀█▀██▀█▀   \033[0;33m█▀███████▀█   \033[0;34m▀▀███▀▀███▀▀   \
\033[0;35m▀█▀██▀█▀\033[0m"
    echo -e "\033[0;30m▀ ▀▄▄ ▄▄▀ ▀   \033[0;31m ▀█▄ ▀▀ ▄█▀    \
\033[0;32m▀▄    ▄▀   \033[0;33m▀ ▀▄▄ ▄▄▀ ▀   \033[0;34m ▀█▄ ▀▀ ▄█▀    \
\033[0;35m▀▄    ▄▀\033[0m"
    echo
    echo -e "\033[1;30m▄ ▀▄   ▄▀ ▄   \033[1;31m ▄▄▄████▄▄▄    \
\033[1;32m  ▄██▄     \033[1;33m▄ ▀▄   ▄▀ ▄   \033[1;34m ▄▄▄████▄▄▄    \
\033[1;35m  ▄██▄  \033[0m"
    echo -e "\033[1;30m█▄█▀███▀█▄█   \033[1;31m███▀▀██▀▀███   \
\033[1;32m▄█▀██▀█▄   \033[1;33m█▄█▀███▀█▄█   \033[1;34m███▀▀██▀▀███   \
\033[1;35m▄█▀██▀█▄\033[0m"
    echo -e "\033[1;30m▀█████████▀   \033[1;31m▀▀▀██▀▀██▀▀▀   \
\033[1;32m▀▀█▀▀█▀▀   \033[1;33m▀█████████▀   \033[1;34m▀▀▀██▀▀██▀▀▀   \
\033[1;35m▀▀█▀▀█▀▀\033[0m"
    echo -e "\033[1;30m ▄▀     ▀▄    \033[1;31m▄▄▀▀ ▀▀ ▀▀▄▄   \
\033[1;32m▄▀▄▀▀▄▀▄   \033[1;33m ▄▀     ▀▄    \033[1;34m▄▄▀▀ ▀▀ ▀▀▄▄   \
\033[1;35m▄▀▄▀▀▄▀▄\033[0m"
    echo
    echo -e "                                   \033[1;37m▌\033[0m"
    echo
    echo -e "                                 \033[1;37m▌\033[0m"
    echo
    echo -e "                            \033[1;37m    ▄█▄    \033[0m"
    echo -e "                            \033[1;37m▄█████████▄\033[0m"
    echo -e "                            \033[1;37m▀▀▀▀▀▀▀▀▀▀▀\033[0m"
}

function _colors_help() {
    echo "Show the colors supported by the terminal."
    echo
    echo "Usage: colors [-hlgtp]"
    echo
    echo " -h  This help"
    echo " -l  Show a list of color names"
    echo " -g  Show a grid of colors"
    echo " -t  Show a true color line"
    echo " -p  Show a colored pacman"
}

if ! args=$(getopt hlgtp "$*"); then
    _colors_help
    exit 2
fi

# shellcheck disable=SC2086
set -- $args

for i; do
    case "$i" in
    -h)
        _colors_help
        shift
        break
        ;;
    -l)
        _colors_list
        shift
        break
        ;;
    -g)
        _color_grid
        shift
        break
        ;;
    -t)
        _true_color_line
        shift
        break
        ;;
    -p)
        _color_pacman
        shift
        break
        ;;
    --)
        _colors_space
        shift
        break
        ;;
    esac
done
